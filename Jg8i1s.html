<!DOCTYPE html> <html> 	<head> 		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 		<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7250753558435816" crossorigin="anonymous"></script> 		<link rel="stylesheet" href="../layout.css"> 		<script type="text/javascript" src="../functions.js"></script> 		<script> 			const sP3d10 = "M1b M12 S1b S11 N1b N1e S1e M11 M13 S2b S21 S23 E001 E002 S22 S25 C1b C1e S24 S26 C2b C22 E003 S21 S23 E001 E004 S22 S25 C1b C1e S24 S26 C2b C22 E003 S21 S23 E001 E005 C21 C23 S3b S31 S32 C4b C41 C4e S31 S32 C4b C41 C4e S31 S3e C24 C22 E003 E006 C21 C23 S3b S31 S32 C4b C41 C4e S31 S32 C4b C41 C4e S31 S3e C24 C22 E003"; 		</script> 	</head> 	<body oncontextmenu="return false" oncut="return false" onpaste="return false" draggable="false" ondragstart="return false" ondrop="return false"> 		<div id = "container"> 			<div id = "titleBox"> JAVA 프로그래밍 </div> 			<div id = "navigationBox"><ol start=0><li><a href='../Jf0i/Jf0i0.html'>JAVA 프로그래밍 시작</a></li><li><a href='../Jf1i/Jf1i0.html'>출력</a></li><li><a href='../Jf2i/Jf2i0.html'>입력</a></li><li><a href='../Jf3i/Jf3i0.html'>변수</a></li><li><a href='../Jf4i/Jf4i0.html'>연산자</a></li><li><a href='../Jf5i/Jf5i0.html'>선택문(삼항연산자/switch)</a></li><li><a href='../Jf6i/Jf6i0.html'>선택문(if)</a></li><li><a href='../Jf7i/Jf7i0.html'>반복문(while)</a></li><li><a href='../Jf8i/Jf8i0.html'>반복문(for)</a></li><li><a href='../Jf9i/Jf9i0.html'>배열</a></li><li><a href='../Jg0i/Jg0i0.html'>문자열/컬렉션</a></li><li><a href='../Jg1i/Jg1i0.html'>클래스/패키지</a></li><li><a href='../Jg2i/Jg2i0.html'>상속/다형성</a></li><li><a href='../Jg3i/Jg3i0.html'>GUI기초</a></li><li><a href='../Jg4i/Jg4i0.html'>GUI응용</a></li><li><a href='../Jg5i/Jg5i0.html'>예외/쓰레드</a></li><li><a href='../Jg6i/Jg6i0.html'>파일입출력</a></li><li><a href='../Jg7i/Jg7i0.html'>네트워크(1:1)</a></li><li><a href='../Jg8i/Jg8i0.html'>네트워크(1:n)</a></li><ul><li><a href='../Jg8i/Jg8i1.html'>채팅(서버)</a></li><ul><li><a href='Jg8i1.html'>코드읽기</a></li><li><a href='Jg8i1a.html'>알고리즘</a></li><li><a href='Jg8i1k.html'>키워드</a></li><li><a href='Jg8i1b.html'>빈칸채우기</a></li><li><a href='Jg8i1s.html'>실행순서</a></li><li><a href='Jg8i1m.html'>실행상태</a></li><li><a href='https://github.com/CodeReading101/JAVA/blob/main/Chapter18/MultiClientServer_Main.java' target='code'>소스코드</a></li></ul><li><a href='../Jg8i/Jg8i2.html'>채팅(클라이언트)</a></li><li><a href='../Jg8i/Jg8i3.html'>가전(서버)</a></li><li><a href='../Jg8i/Jg8i4.html'>가전(리모컨 클라이언트)</a></li><li><a href='../Jg8i/Jg8i5.html'>가전(TV 클라이언트)</a></li></ul><li><a href='../Jg9i/Jg9i0.html'>열거형/제네릭</a></li><li><a href='../Jh0i/Jh0i0.html'>재귀함수</a></li></ol></div>  			<div id = "contentBox"> 				<h4>문제</h4> 				<pre style='white-space:normal;'>멀티클라이언트 채팅 프로그램에서 네트워크 서버 부분의 문제입니다 실행순서를 클릭하세요 </pre> 				
<a href = "https://shyprogrammer351.github.io/ig3i/9.1_CHAT_Multi.pdf" >(시퀀스다이어그램 확인)</a>
<pre> 
</pre><br>  	 				<h4>프로그램 코드</h4> 				<pre>
<pre id="codeE001" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('E001')">E001		<font color="green">// 상대편이 접속 요청할 때까지 계속 대기</font>
</pre><pre id="codeE002" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('E002')">E002		<font color="green">// [클라이언트1]이 접속 요청하면 [서버]는 네트워크 연결 초기화</font>
</pre><pre id="codeE003" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('E003')">E003		<font color="green">// 상대편 데이터가 도착할 때까지 계속 대기</font>
</pre><pre id="codeE004" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('E004')">E004		<font color="green">// [클라이언트2]가 접속 요청하면 [서버]는 네트워크 연결 초기화</font>
</pre><pre id="codeE005" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('E005')">E005		<font color="green">// [클라이언트2]가 보낸 데이터([CHAT] [클라이언트2]안녕하세요)가 [서버]에 도착</font>
</pre><pre id="codeE006" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('E006')">E006		<font color="green">// [클라이언트1]이 보낸 데이터([CHAT] [클라이언트1]반갑습니다)가 [서버]에 도착</font>

</pre><pre id="code0" class="unselectable codeClass">	import network.MultiClientServer;

</pre><pre id="code0" class="unselectable codeClass">	public class MultiClientServer_Main
</pre><pre id="code0" class="unselectable codeClass">	{
</pre><pre id="codeM1b" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('M1b')">M1b		public static void main(String[] args)
</pre><pre id="code0" class="unselectable codeClass">		{
</pre><pre id="codeM11" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('M11')">M11			MultiClientServer server =
</pre><pre id="codeM12" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('M12')">M12			                           new MultiClientServer();
</pre><pre id="codeM13" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('M13')">M13			server.connectAsMultiClientServer();
</pre><pre id="codeM1e" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('M1e')">M1e		}
</pre><pre id="code0" class="unselectable codeClass">	}

</pre><pre id="code0" class="unselectable codeClass">	package network;
</pre><pre id="code0" class="unselectable codeClass">	import java.net.ServerSocket;
</pre><pre id="code0" class="unselectable codeClass">	import java.util.ArrayList;

</pre><pre id="code0" class="unselectable codeClass">	public class MultiClientServer extends Network
</pre><pre id="code0" class="unselectable codeClass">	{
</pre><pre id="code0" class="unselectable codeClass">		private ArrayList&lt;Client&gt; clients;

</pre><pre id="codeS1b" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('S1b')">S1b		public MultiClientServer()
</pre><pre id="code0" class="unselectable codeClass">		{
</pre><pre id="codeS11" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('S11')">S11			super();
</pre><pre id="code0" class="unselectable codeClass">			clients = new ArrayList&lt;Client&gt;();
</pre><pre id="codeS1e" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('S1e')">S1e		}

</pre><pre id="codeS2b" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('S2b')">S2b		public void connectAsMultiClientServer()
</pre><pre id="code0" class="unselectable codeClass">		{
</pre><pre id="code0" class="unselectable codeClass">			try
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="code0" class="unselectable codeClass">				serverSocket = new ServerSocket( serverPort );
</pre><pre id="code0" class="unselectable codeClass">				System.out.println( "[Server] 서버 대기중" );

</pre><pre id="codeS21" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('S21')">S21				while ( true )
</pre><pre id="code0" class="unselectable codeClass">				{
</pre><pre id="codeS22" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('S22')">S22					socket =
</pre><pre id="codeS23" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('S23')">S23							serverSocket.accept();
</pre><pre id="codeS24" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('S24')">S24					Client client =
</pre><pre id="codeS25" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('S25')">S25								new Client( this );
</pre><pre id="code0" class="unselectable codeClass">					System.out.println( "[Server] 클라이언트 연결 : " + client );
</pre><pre id="code0" class="unselectable codeClass">					clients.add( client );
</pre><pre id="codeS26" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('S26')">S26					client.start();
</pre><pre id="codeS27" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('S27')">S27				} <font color="green">// while 반복</font>
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="code0" class="unselectable codeClass">			catch ( Exception e )
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="code0" class="unselectable codeClass">				e.printStackTrace();
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="codeS2e" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('S2e')">S2e		}
</pre><pre id="code0" class="unselectable codeClass">		
</pre><pre id="codeS3b" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('S3b')">S3b		public void broadcast( String data )
</pre><pre id="code0" class="unselectable codeClass">		{
</pre><pre id="codeS31" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('S31')">S31			for( Client client : clients )
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="codeS32" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('S32')">S32				client.write( data );
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="codeS3e" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('S3e')">S3e		}

</pre><pre id="codeS4b" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('S4b')">S4b		public void disconnect()
</pre><pre id="code0" class="unselectable codeClass">		{
</pre><pre id="code0" class="unselectable codeClass">			for( Client client : clients )
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="code0" class="unselectable codeClass">				client.interrupt();
</pre><pre id="code0" class="unselectable codeClass">				client.disconnect();
</pre><pre id="code0" class="unselectable codeClass">				clients.remove( client );
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="code0" class="unselectable codeClass">			
</pre><pre id="code0" class="unselectable codeClass">			super.disconnect();
</pre><pre id="codeS4e" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('S4e')">S4e		}
</pre><pre id="code0" class="unselectable codeClass">	}

</pre><pre id="code0" class="unselectable codeClass">
</pre><pre id="code0" class="unselectable codeClass">	package network;
</pre><pre id="code0" class="unselectable codeClass">	import java.io.BufferedReader;
</pre><pre id="code0" class="unselectable codeClass">	import java.io.InputStreamReader;
</pre><pre id="code0" class="unselectable codeClass">	import java.io.PrintWriter;

</pre><pre id="code0" class="unselectable codeClass">	public class Client extends Thread
</pre><pre id="code0" class="unselectable codeClass">	{
</pre><pre id="code0" class="unselectable codeClass">		private MultiClientServer server;
</pre><pre id="code0" class="unselectable codeClass">		private BufferedReader in;
</pre><pre id="code0" class="unselectable codeClass">		private PrintWriter out;

</pre><pre id="codeC1b" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('C1b')">C1b		public Client( MultiClientServer server )
</pre><pre id="code0" class="unselectable codeClass">		{
</pre><pre id="code0" class="unselectable codeClass">			try
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="code0" class="unselectable codeClass">				this.server = server;
</pre><pre id="code0" class="unselectable codeClass">				this.in = new BufferedReader( new InputStreamReader( server.socket.getInputStream() ) );
</pre><pre id="code0" class="unselectable codeClass">				this.out = new PrintWriter( server.socket.getOutputStream(), true );
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="code0" class="unselectable codeClass">			catch ( Exception e )
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="code0" class="unselectable codeClass">				e.printStackTrace();
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="codeC1e" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('C1e')">C1e		}

</pre><pre id="code0" class="unselectable codeClass">		@Override
</pre><pre id="codeC2b" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('C2b')">C2b		public void run()
</pre><pre id="code0" class="unselectable codeClass">		{
</pre><pre id="code0" class="unselectable codeClass">			try
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="codeC21" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('C21')">C21				for( String data = null; ( data =
</pre><pre id="codeC22" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('C22')">C22				                                  in.readLine() )
</pre><pre id="code0" class="unselectable codeClass">				                                                 != null; )
</pre><pre id="code0" class="unselectable codeClass">				{
</pre><pre id="code0" class="unselectable codeClass">					System.out.println("[Server] 데이터 도착 : " + this + " " + data );
</pre><pre id="codeC23" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('C23')">C23					server.broadcast( data );
</pre><pre id="codeC24" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('C24')">C24				}
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="code0" class="unselectable codeClass">			catch ( Exception e )
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="code0" class="unselectable codeClass">				e.printStackTrace();
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="codeC2e" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('C2e')">C2e		}


</pre><pre id="codeC3b" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('C3b')">C3b		public void disconnect()
</pre><pre id="code0" class="unselectable codeClass">		{
</pre><pre id="code0" class="unselectable codeClass">			try
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="code0" class="unselectable codeClass">				if( in != null )
</pre><pre id="code0" class="unselectable codeClass">				{
</pre><pre id="code0" class="unselectable codeClass">					in.close();
</pre><pre id="code0" class="unselectable codeClass">					in = null;
</pre><pre id="code0" class="unselectable codeClass">				}
</pre><pre id="code0" class="unselectable codeClass">				if( out != null )
</pre><pre id="code0" class="unselectable codeClass">				{
</pre><pre id="code0" class="unselectable codeClass">					out.close();
</pre><pre id="code0" class="unselectable codeClass">					out = null;
</pre><pre id="code0" class="unselectable codeClass">				}
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="code0" class="unselectable codeClass">			catch ( Exception e )
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="code0" class="unselectable codeClass">				e.printStackTrace();
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="codeC3e" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('C3e')">C3e		}
</pre><pre id="code0" class="unselectable codeClass">		
</pre><pre id="codeC4b" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('C4b')">C4b		public void write( String data )
</pre><pre id="code0" class="unselectable codeClass">		{
</pre><pre id="code0" class="unselectable codeClass">			try
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="code0" class="unselectable codeClass">				if ( this.getState() == Thread.State.TERMINATED )
</pre><pre id="code0" class="unselectable codeClass">				{
</pre><pre id="code0" class="unselectable codeClass">					System.out.println( "[Server] 클라이언트 연결 해제 : " + this );
</pre><pre id="code0" class="unselectable codeClass">				}
</pre><pre id="code0" class="unselectable codeClass">				else if ( out != null )
</pre><pre id="code0" class="unselectable codeClass">				{
</pre><pre id="code0" class="unselectable codeClass">					System.out.println("[Server] 데이터 전송 : " + this + " " + data );
</pre><pre id="codeC41" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('C41')">C41					out.println( data );
</pre><pre id="code0" class="unselectable codeClass">				}
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="code0" class="unselectable codeClass">			catch ( Exception e )
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="code0" class="unselectable codeClass">				e.printStackTrace();
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="codeC4e" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('C4e')">C4e		}
</pre><pre id="code0" class="unselectable codeClass">	}

</pre><pre id="code0" class="unselectable codeClass">
</pre><pre id="code0" class="unselectable codeClass">	package network;
</pre><pre id="code0" class="unselectable codeClass">	import java.io.BufferedReader;
</pre><pre id="code0" class="unselectable codeClass">	import java.io.InputStreamReader;
</pre><pre id="code0" class="unselectable codeClass">	import java.io.PrintWriter;
</pre><pre id="code0" class="unselectable codeClass">	import java.net.ServerSocket;
</pre><pre id="code0" class="unselectable codeClass">	import java.net.Socket;

</pre><pre id="code0" class="unselectable codeClass">	public class Network
</pre><pre id="code0" class="unselectable codeClass">	{
</pre><pre id="code0" class="unselectable codeClass">		protected int serverPort;
</pre><pre id="code0" class="unselectable codeClass">		protected ServerSocket serverSocket;
</pre><pre id="code0" class="unselectable codeClass">		protected Socket socket;
</pre><pre id="code0" class="unselectable codeClass">		
</pre><pre id="code0" class="unselectable codeClass">		private BufferedReader in;
</pre><pre id="code0" class="unselectable codeClass">		private PrintWriter out;
</pre><pre id="code0" class="unselectable codeClass">		private Thread waitForCounterpart;

</pre><pre id="codeN1b" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N1b')">N1b		public Network()
</pre><pre id="code0" class="unselectable codeClass">		{
</pre><pre id="code0" class="unselectable codeClass">			serverPort = 7700;
</pre><pre id="code0" class="unselectable codeClass">			serverSocket = null;
</pre><pre id="code0" class="unselectable codeClass">			socket = null;
</pre><pre id="code0" class="unselectable codeClass">			in = null;
</pre><pre id="code0" class="unselectable codeClass">			out = null;
</pre><pre id="code0" class="unselectable codeClass">			waitForCounterpart = null;
</pre><pre id="codeN1e" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N1e')">N1e		}
</pre><pre id="code0" class="unselectable codeClass">		
</pre><pre id="codeN2b" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N2b')">N2b		public void connectAsServer( Runnable obj )
</pre><pre id="code0" class="unselectable codeClass">		{
</pre><pre id="code0" class="unselectable codeClass">			try
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="code0" class="unselectable codeClass">				serverSocket = new ServerSocket( serverPort );
</pre><pre id="codeN21" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N21')">N21				socket =
</pre><pre id="codeN22" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N22')">N22				         serverSocket.accept();
</pre><pre id="code0" class="unselectable codeClass">				in = new BufferedReader( new InputStreamReader( socket.getInputStream() ) );
</pre><pre id="code0" class="unselectable codeClass">				out = new PrintWriter( socket.getOutputStream(), true );
</pre><pre id="code0" class="unselectable codeClass">				waitForCounterpart = new Thread( obj );
</pre><pre id="codeN23" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N23')">N23				waitForCounterpart.start();
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="code0" class="unselectable codeClass">			catch ( Exception e )
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="code0" class="unselectable codeClass">				e.printStackTrace();
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="codeN2e" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N2e')">N2e		}

</pre><pre id="codeN3b" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N3b')">N3b		public void connectAsClient( String serverIP, Runnable obj )
</pre><pre id="code0" class="unselectable codeClass">		{
</pre><pre id="code0" class="unselectable codeClass">			try
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="codeN31" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N31')">N31				socket =
</pre><pre id="codeN32" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N32')">N32				         new Socket( serverIP, serverPort );
</pre><pre id="code0" class="unselectable codeClass">				in = new BufferedReader( new InputStreamReader( socket.getInputStream() ));
</pre><pre id="code0" class="unselectable codeClass">				out = new PrintWriter( socket.getOutputStream(), true );
</pre><pre id="code0" class="unselectable codeClass">				waitForCounterpart = new Thread( obj );
</pre><pre id="codeN33" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N33')">N33				waitForCounterpart.start();
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="code0" class="unselectable codeClass">			catch ( Exception e )
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="code0" class="unselectable codeClass">				e.printStackTrace();
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="codeN3e" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N3e')">N3e		}
</pre><pre id="code0" class="unselectable codeClass">		
</pre><pre id="codeN4b" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N4b')">N4b		public String read()
</pre><pre id="code0" class="unselectable codeClass">		{
</pre><pre id="code0" class="unselectable codeClass">			try
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="code0" class="unselectable codeClass">				if ( this.isConnecting() == true )
</pre><pre id="codeN41" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N41')">N41					return
</pre><pre id="codeN42" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N42')">N42					       in.readLine(); <font color="green">// 네트워크에 상대편 데이터가 도착할 때까지 계속 대기</font>
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="code0" class="unselectable codeClass">			catch ( Exception e )
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="code0" class="unselectable codeClass">				e.printStackTrace();
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="code0" class="unselectable codeClass">			
</pre><pre id="code0" class="unselectable codeClass">			return null;
</pre><pre id="codeN4e" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N4e')">N4e		}
</pre><pre id="code0" class="unselectable codeClass">		
</pre><pre id="codeN5b" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N5b')">N5b		public void write( String data )
</pre><pre id="code0" class="unselectable codeClass">		{
</pre><pre id="code0" class="unselectable codeClass">			try
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="code0" class="unselectable codeClass">				if ( this.isConnecting() == true )
</pre><pre id="codeN51" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N51')">N51					out.println( data );
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="code0" class="unselectable codeClass">			catch ( Exception e )
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="code0" class="unselectable codeClass">				e.printStackTrace();
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="codeN5e" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N5e')">N5e		}
</pre><pre id="code0" class="unselectable codeClass">		
</pre><pre id="codeN6b" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N6b')">N6b		public void disconnect()
</pre><pre id="code0" class="unselectable codeClass">		{
</pre><pre id="code0" class="unselectable codeClass">			try
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="code0" class="unselectable codeClass">				if( waitForCounterpart != null )
</pre><pre id="code0" class="unselectable codeClass">				{
</pre><pre id="code0" class="unselectable codeClass">					waitForCounterpart.interrupt();
</pre><pre id="code0" class="unselectable codeClass">					waitForCounterpart = null;
</pre><pre id="code0" class="unselectable codeClass">				}
</pre><pre id="code0" class="unselectable codeClass">				if( in != null )
</pre><pre id="code0" class="unselectable codeClass">				{
</pre><pre id="code0" class="unselectable codeClass">					in.close();
</pre><pre id="code0" class="unselectable codeClass">					in=null;
</pre><pre id="code0" class="unselectable codeClass">				}
</pre><pre id="code0" class="unselectable codeClass">				if( out != null )
</pre><pre id="code0" class="unselectable codeClass">				{
</pre><pre id="code0" class="unselectable codeClass">					out.flush();
</pre><pre id="code0" class="unselectable codeClass">					out.close();
</pre><pre id="code0" class="unselectable codeClass">					out = null;
</pre><pre id="code0" class="unselectable codeClass">				}
</pre><pre id="code0" class="unselectable codeClass">				if( socket != null )
</pre><pre id="code0" class="unselectable codeClass">				{
</pre><pre id="code0" class="unselectable codeClass">					socket.close();
</pre><pre id="code0" class="unselectable codeClass">					socket = null;
</pre><pre id="code0" class="unselectable codeClass">				}
</pre><pre id="code0" class="unselectable codeClass">				if( serverSocket != null )
</pre><pre id="code0" class="unselectable codeClass">				{
</pre><pre id="code0" class="unselectable codeClass">					serverSocket.close();
</pre><pre id="code0" class="unselectable codeClass">					serverSocket = null;
</pre><pre id="code0" class="unselectable codeClass">				}
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="code0" class="unselectable codeClass">			catch ( Exception e )
</pre><pre id="code0" class="unselectable codeClass">			{
</pre><pre id="code0" class="unselectable codeClass">				e.printStackTrace();
</pre><pre id="code0" class="unselectable codeClass">			}
</pre><pre id="codeN6e" class="unselectable codeClass" onmouseover="sP3f8(this.id, true) " onmouseout="sP3f8(this.id, false)" onclick="sP3f7('N6e')">N6e		}

</pre><pre id="code0" class="unselectable codeClass">		public boolean isConnecting()
</pre><pre id="code0" class="unselectable codeClass">		{
</pre><pre id="code0" class="unselectable codeClass">			if ( ( socket != null )
</pre><pre id="code0" class="unselectable codeClass">					&& ( in != null )
</pre><pre id="code0" class="unselectable codeClass">					&& ( out != null )
</pre><pre id="code0" class="unselectable codeClass">					&& ( waitForCounterpart != null )
</pre><pre id="code0" class="unselectable codeClass">					&& ( waitForCounterpart.getState() != Thread.State.TERMINATED ) )
</pre><pre id="code0" class="unselectable codeClass">				return true;
</pre><pre id="code0" class="unselectable codeClass">			else
</pre><pre id="code0" class="unselectable codeClass">				return false;
</pre><pre id="code0" class="unselectable codeClass">		}
</pre><pre id="code0" class="unselectable codeClass">	}
</pre>
</pre> 				<br><br><br><br><br><br><br><br> &nbsp;  			</div> 			<div id = "floatingBox"> 				<b>실행 순서</b> 				<pre id = "sP3d4" style='white-space:normal; word-wrap:break-word; width:150px;'></pre> 			</div> 		</div> 	</body> </html>   
